<div class="main-container">
    <div class="middle-container" *ngIf="(this.spinnerService.getLoadingStatus() | async) === true; else content">
        <div class="spinner-container">
            <mat-spinner></mat-spinner>
        </div>
    </div>

</div>

<ng-template #loading>

</ng-template>

<ng-template #content>
    <section style="display: flex; flex-direction: row; flex:1; justify-content: center;"
        *ngIf="articleInfo!=null; else empty">
        <div class="middle-container">
            <div class="header-container">
                <div class="title-container">
                    <a class="title-style">{{articleInfo.title}}</a>
                    <a class="date">{{articleInfo.date | date: 'dd-MM-yyyy'}}</a>
                </div>
                <div class="price-container">
                    <a>{{articleInfo.price}}KM</a>
                    <button>Kupi</button>
                </div>
            </div>
            <mat-divider></mat-divider>
            <h2 #slike class="attributes-style">Slike</h2>
            <!-- <div class="images-section">
                <div class="image-container">
                    <img src="assets/laptop.jpg" class="image-style">
                </div>
                <div class="images-list-container">
                    <mat-list>
                        <mat-list-item *ngFor="let num of [1,2,3,4,5,7,32,4,2]">
                            <div>
                                <img src="assets/laptop.jpg" style="width: 100%;">
                            </div>
                        </mat-list-item>
                    </mat-list>
                </div>
            </div> -->
            <app-image-slider *ngIf="articleInfo.photos.length>0 else noimages" [images]="articleInfo.photos"></app-image-slider>
            <h2 #osobine class="attributes-style">Osobine</h2>
            <div class="attributes-container" *ngIf="articleInfo.attributes.length>0; else noattributes">
                <div class="single-attribute-container" *ngFor="let att of articleInfo.attributes">
                    <a class="attribute-name">{{att.name}}</a>
                    <a class="attribute-value">{{att.value}}</a>
                </div>
                <!-- <table>
                    <tbody>
                        <tr *ngFor="let att of prod.attributes">
                            <th>{{att.name}}</th>
                            <th>{{att.value}}</th>
                        </tr>
                    </tbody>
                </table> -->
            </div>
            <h2 #detalji class="attributes-style">Detalji</h2>
            <a class="details">{{articleInfo.details}}</a>
            <h2 #komentari class="attributes-style">Komentari</h2>
            <div class="post-comment-container">
                <mat-form-field appearance="outline">
                    <mat-label>Komentar</mat-label>
                    <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="5"></textarea>
                </mat-form-field>
                <button mat-flat-button>Postavi</button>
            </div>
            <div class="comments-section" *ngIf="articleInfo.comments && articleInfo.comments.length>0; else nocomments">
                <div class="comment" *ngFor="let com of articleInfo.comments">
                    <div class="header">
                        <a class="com-username">{{com.username}}</a>
                        <a class="com-date">{{com.dateTime}}</a>
                    </div>
                    <a class="com-content">{{com.content}}</a>
                </div>
            </div>
        </div>
        <div class="side-container">
            <div class="user-info-container">
                <div class="info-section">
                    <a class="username">{{articleInfo.user.username}}</a>
                    <a class="city">{{articleInfo.user.userLocationName}}</a>
                </div>
                <button [matMenuTriggerFor]="moreOptionsMenu" mat-icon-button>
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #moreOptionsMenu="matMenu">
                    <button mat-menu-item (click)="onDeleteArticle()" *ngIf="this.isAuthenticatedUser()">
                        <mat-icon>delete_outline</mat-icon>
                        <a>Obrisi</a>
                    </button>
                    <button mat-menu-item (click)="onUpdateArticle()" *ngIf="this.isAuthenticatedUser()">
                        <mat-icon>edit</mat-icon>
                        <a>Izmjeni</a>
                    </button>
                    <button mat-menu-item (click)="openProfile()">
                        <mat-icon>person</mat-icon>
                        <a>Otvori profil</a>
                    </button>
                </mat-menu>
            </div>
            <div class="overeview-nav-container">
                <button (click)="scroll(slike)" class="scroll-nav-button">Slike</button>
                <button (click)="scroll(osobine)" class="scroll-nav-button">Osobine</button>
                <button (click)="scroll(detalji)" class="scroll-nav-button">Detalji</button>
                <button (click)="scroll(komentari)" class="scroll-nav-button">Komentari</button>
            </div>
        </div>
    </section>
</ng-template>

<ng-template #empty>
    <a> EMPTY </a>
</ng-template>

<ng-template #noimages>
    <div class="no-images">
        <a>
            No images.
        </a>
    </div>
</ng-template>

<ng-template #noattributes>
    <div class="attributes-container">
        <a>
            No attributes.
        </a>
    </div>
</ng-template>

<ng-template #nocomments>
    <div style="display:flex; flex:1; justify-content: center; align-items: center; margin:30px;">
        <a> Nema komentara! </a>
    </div>
</ng-template>